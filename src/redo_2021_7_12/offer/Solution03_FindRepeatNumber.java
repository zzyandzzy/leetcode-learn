package redo_2021_7_12.offer;


//æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—ã€‚
//
//
//åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œ
// ä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·
//æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚
//
// ç¤ºä¾‹ 1ï¼š
//
// è¾“å…¥ï¼š
//[2, 3, 1, 0, 2, 5, 3]
//è¾“å‡ºï¼š2 æˆ– 3
//
//
//
//
// é™åˆ¶ï¼š
//
// 2 <= n <= 100000
// Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æ’åº
// ğŸ‘ 476 ğŸ‘ 0

import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

/**
 * @author intent <a>zzy.main@gmail.com</a>
 * @date 2021/7/12 4:43 ä¸‹åˆ
 * @since 1.0
 */
public class Solution03_FindRepeatNumber {
    public static void main(String[] args) {
        System.out.println(findRepeatNumber3(new int[]{2, 3, 1, 0, 2, 5, 3}));
        System.out.println(findRepeatNumber3(new int[]{1, 3, 5, 0, 2, 5, 3}));
        System.out.println(findRepeatNumber3(new int[]{1, 0, 1}));
    }

    /**
     * æœ€åæƒ³åˆ°äº¤æ¢æ³•ï¼Œä»”ç»†çœ‹é¢˜ç›®æœ‰ä¸ªæ¡ä»¶ï¼Œnums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¡ä»¶æŠŠå…ƒç´ çš„å€¼ä½œä¸ºä¸‹æ ‡äº¤æ¢ã€‚
     * nums = [1, 3, 5, 0, 2, 5, 3]
     * ç¬¬1æ­¥ï¼š     i = 0,äº¤æ¢num[0]ï¼Œ[3, 1, 5, 0, 2, 5, 3]
     * ç¬¬1.1æ­¥ï¼š   i = 0,äº¤æ¢num[0]ï¼Œ[0, 1, 5, 3, 2, 5, 3]ï¼Œå› ä¸ºnum[0] = 0ï¼Œè·³å‡º
     * ç¬¬2æ­¥ï¼š     i = 1,äº¤æ¢num[1]ï¼Œ[0, 1, 5, 3, 2, 5, 3]ï¼Œå› ä¸ºnum[1] = 1ï¼Œè·³å‡º
     * ç¬¬3æ­¥ï¼š     i = 2,äº¤æ¢num[2]ï¼Œ[0, 1, 2, 3, 2, 5, 3]ï¼Œå› ä¸ºnum[5] = 5ï¼Œç›´æ¥è¿”å›
     * æ‰§è¡Œç”¨æ—¶: 0 msï¼Œå‡»è´¥äº†100% çš„Javaç”¨æˆ·
     * å†…å­˜æ¶ˆè€—: 46 MB
     * æäº¤æ—¶é—´ï¼š2 åˆ†é’Ÿå‰
     * æ—¶é—´å¤æ‚åº¦ï¼šO(n)
     * ç©ºé—´å¤æ‚åº¦ï¼šO(1)
     *
     * @param nums
     * @return
     * @since 1.1
     * @deprecated æœ‰bugï¼ï¼ï¼
     * num = [2,3,1,0,2,5,3]
     * ç¬¬é›¶æ­¥ï¼šåˆå§‹åŒ–ï¼štmp = num[0] = 2
     * ç¬¬ä¸€æ­¥ï¼štmpä¸º2ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º2çš„1å¤„ï¼Œæ­¤æ—¶ï¼š[2,1,2,0,2,5,3] tmp: 1
     * ç¬¬äºŒæ­¥ï¼štmpä¸º1ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º1çš„3å¤„ï¼Œæ­¤æ—¶ï¼š[2,1,2,0,2,5,3] tmp: 3
     * ç¬¬ä¸‰æ­¥ï¼štmpä¸º3ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º3çš„0å¤„ï¼Œæ­¤æ—¶ï¼š[2,1,2,0,2,5,3] tmp: 0
     * ç¬¬å››æ­¥ï¼štmpä¸º0ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º0çš„2å¤„ï¼Œæ­¤æ—¶ï¼š[0,1,2,0,2,5,3] tmp: 2
     * ç¬¬äº”æ­¥ï¼štmpä¸º2ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º2çš„2å¤„ï¼Œæ­¤æ—¶å› ä¸ºä¸‹æ ‡ä¸º2å¤„å·²ç»æ˜¯2äº†ï¼Œæ‰€ä»¥è¿”å›2
     * ä¸Šé¢çš„æ–¹æ³•å¯¹äºè¿™ç§æƒ…å†µå°±ä¼šå‡ºç°é”™è¯¯ï¼ï¼ï¼
     * nums = [1, 3, 5, 0, 2, 5, 3]
     * ç¬¬é›¶æ­¥ï¼šåˆå§‹åŒ–ï¼štmp = num[0] = 1
     * ç¬¬ä¸€æ­¥ï¼štmpä¸º1ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º1çš„3å¤„ï¼Œæ­¤æ—¶ï¼š[1, 1, 5, 0, 2, 5, 3] tmp: 3
     * ç¬¬äºŒæ­¥ï¼štmpä¸º3ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º3çš„0å¤„ï¼Œæ­¤æ—¶ï¼š[1, 1, 5, 3, 2, 5, 3] tmp: 0
     * ç¬¬ä¸‰æ­¥ï¼štmpä¸º0ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º0çš„1å¤„ï¼Œæ­¤æ—¶ï¼š[0, 1, 5, 3, 2, 5, 3] tmp: 1
     * ç¬¬å››æ­¥ï¼štmpä¸º1ï¼Œåˆ™æ¢åˆ°ä¸‹æ ‡ä¸º1çš„1å¤„ï¼Œæ­¤æ—¶å‡ºç°é”™è¯¯ï¼ï¼ï¼
     * æ‰€ä»¥è¿™ç§äº¤æ¢æ³•æ˜¯æœ‰bugçš„
     */
    public static int findRepeatNumber3(int[] nums) {
//        // å½“å‰çš„æŒ‡é’ˆ
//        int current = 0;
//        // è¦äº¤æ¢çš„ä½ç½®
//        int tmp = nums[current];
//        while (nums[current] != nums[tmp]) {
//            // è¦äº¤æ¢ä½ç½®çš„å€¼
//            int val = nums[tmp];
//            nums[tmp] = tmp;
//            current = tmp;
//            tmp = val;
//        }
//        return nums[current];
        for (int i = 0; i < nums.length; i++) {
            while (nums[i] != i) {
                if (nums[i] == nums[nums[i]]) {
                    return nums[i];
                }
                int temp = nums[i];
                nums[i] = nums[temp];
                nums[temp] = temp;
            }
        }
        return -1;
    }

    /**
     * ç„¶åæƒ³åˆ°æ’åºæ³•ï¼Œæ—¢ç„¶æœ‰é‡å¤çš„ï¼Œæ’ä¸‹åºå°±çŸ¥é“äº†ï¼
     * æ—¶é—´å¤æ‚åº¦ï¼šArrays.sortè¿™ä¸ªæ’åºæ˜¯æ ¹æ®æ•°ç»„é‡Œé¢çš„å…ƒç´ æ¥é€‰æ‹©æ’åºç®—æ³•çš„ï¼Œæ‰€ä»¥å…ƒç´ ä¸åŒæ—¶é—´å¤æ‚åº¦ä¹Ÿä¸åŒï¼š
     * 1. å½“numsæ•°ç»„å…ƒç´ å°äºç­‰äº{@linkplain java.util.DualPivotQuicksort#QUICKSORT_THRESHOLD å³286ä¸ª}æ—¶ï¼Œç”¨åˆ°çš„æ˜¯å¿«é€Ÿæ’åº
     * 2. å…¶ä»–æƒ…å†µä½¿ç”¨å½’å¹¶æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)
     * å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(nlogn)ï¼Œ
     * ç©ºé—´å¤æ‚åº¦ï¼šå¾—çœ‹æ’åºçš„æ¶ˆè€—ï¼Œå¦‚æœæ˜¯å¿«é€Ÿæ’åºï¼šO(logn)ï¼Œå¦‚æœæ˜¯å½’å¹¶æ’åºï¼šO(n)
     * <p>
     * info
     * è§£ç­”æˆåŠŸ:
     * æ‰§è¡Œè€—æ—¶:2 ms,å‡»è´¥äº†67.79% çš„Javaç”¨æˆ·
     * å†…å­˜æ¶ˆè€—:46 MB,å‡»è´¥äº†77.14% çš„Javaç”¨æˆ·
     *
     * @param nums
     * @return
     */
    public static int findRepeatNumber2(int[] nums) {
        // å…ˆæ’åº
        Arrays.sort(nums);
        // å†å¾ªç¯æ‰¾
        for (int i = 0; i < nums.length - 1; i++) {
            if (nums[i] == nums[i + 1]) {
                return nums[i];
            }
        }
        return -1;
    }

    /**
     * é¦–å…ˆè‚¯å®šæƒ³åˆ°äº†Setå•¦ã€‚
     * æ—¶é—´å¤æ‚åº¦ï¼šå› ä¸ºHashSetæ˜¯ç”¨HashMapé¦–å…ˆçš„ï¼Œè€Œcontainsæ–¹æ³•æœ€ç»ˆé¦–å…ˆä¸ºï¼š{@link java.util.HashMap#getNode(int, Object)}
     * å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•çœ‹åˆ°ï¼Œå¯¹äºé“¾è¡¨ï¼Œæœ€åæƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå¯¹äºäºŒå‰æ ‘ï¼ˆHashMapä¸ºçº¢é»‘äºŒå‰æ ‘ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logn)
     * ç©ºé—´å¤æ‚åº¦ï¼šå› ä¸ºéœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨æ‰€æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ä¸ºO(n)
     * info
     * è§£ç­”æˆåŠŸ:
     * æ‰§è¡Œè€—æ—¶:7 ms,å‡»è´¥äº†35.98% çš„Javaç”¨æˆ·
     * å†…å­˜æ¶ˆè€—:47.1 MB,å‡»è´¥äº†43.28% çš„Javaç”¨æˆ·
     *
     * @param nums
     * @return
     */
    public static int findRepeatNumber(int[] nums) {
        Set<Integer> set = new HashSet<>();
        for (int num : nums) {
            if (set.contains(num)) {
                return num;
            }
            set.add(num);
        }
        return -1;
    }
}
